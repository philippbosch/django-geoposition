{% load static %}
<!DOCTYPE>
<html>
    <head>
        <meta charset="utf-8">
        <title>Points of interest</title>
        <link rel="stylesheet" type="text/css" href="static/css/materialize.css">
        <link rel="stylesheet" type="text/css" href="static/css/material-icons.css">
        <link rel="stylesheet" type="text/css" href="static/css/app.css">
    </head>

    <body class="grey lighten-5 grey-text text-darken-4">
        <header class="navbar-fixed">
            <div class="nav-wrapper">
                <nav class="green">
                    <div class="container">
                        <a href="#" class="brand-logo text-light grey-text text-lighten-5">Django Geoposition</a>
                    </div>
                </nav>
            </div>
        </header>

        <main>
            <div class="container">
                <div class="row">
                    <div class="col s12">
                        <h1 class="text-thin grey-text text-darken-4">
                            Points of Interest
                            <br>
                            <small>
                                <small>
                                    <small class="text-light grey-text">
                                        Sample aplication for django-geoposition package
                                    </small>
                                </small>
                            </small>
                            <div class="divider"></div>
                        </h1>
                    </div>
                    <div class="col s12 m4">
                        <div id="poi-list">
                            {% for poi in pois %}
                            <div class="card-panel">
                                <ul class="poi-list text-light">
                                    <li class="title">
                                        <i class="material-icons">place</i>
                                        {{ poi.name }}
                                    </li>
                                    <li class="item">
                                        <strong>Address:</strong>
                                        {{ poi.address }}
                                    </li>
                                    <li class="item">
                                        <strong>City:</strong>
                                        {{ poi.city }}
                                    </li>
                                    <li class="item">
                                        <strong>Zip Code:</strong>
                                        {{ poi.zipcode }}
                                    </li>
                                    <li class="item">
                                        <strong>Position:</strong>
                                        <ul>
                                            <li>
                                                <strong>Latitude:</strong>
                                                {{ poi.position.latitude }}
                                            </li>
                                            <li>
                                                <strong>Longitude:</strong>
                                                {{ poi.position.longitude }}
                                            </li>
                                            <li>
                                                <strong>Elevation:</strong>
                                                {{ poi.position.elevation }}
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col s12 m8">
                        <div id="map-canvas" class="card-panel"></div>
                    </div>
                </div>
            </div>
        </main>


        <script type="text/javascript" charset="utf-8" src="static/js/jquery.js"></script>
        <script type="text/javascript" charset="utf-8" src="static/js/materialize.js"></script>
        <script type="text/javascript" charset="utf-8" src="static/js/app.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
        <script>
            function initialize() {
                var map = new google.maps.Map(document.getElementById('map-canvas'));
                var bounds = new google.maps.LatLngBounds();

                function addMarker(lat, lng, title) {
                    var position = new google.maps.LatLng(lat, lng);
                    var marker = new google.maps.Marker({
                        position: position,
                        map: map,
                        title: title
                    });
                    bounds.extend(position);
                }

                {% for poi in pois %}
                    addMarker({{ poi.position.latitude }}, {{ poi.position.longitude }}, "{{ poi.name }}");
                {% endfor %}

                map.fitBounds(bounds);
            }

            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </body>
</html>
